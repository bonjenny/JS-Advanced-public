(()=>{"use strict";var t="READY";function e(e){this.name=e,this.status=t}function n(){this.status=t,this.resolve()}e.prototype.isAvailable=function(){return this.status===t},e.prototype.finishCooking=function(){this.status=t},e.prototype.cookAsync=function(t){return this.status="COOKING",new Promise(function(e){this.resolve=e,setTimeout(n.bind(this),t.time)}.bind(this))};const i=e;function o(t){this.chefs=t}o.prototype.findChefAsync=function(){return new Promise(function(t){setInterval(function(t,e){return function(){t.forEach((function(t){if(t.isAvailable())return e(t)}))}}(this.chefs,t),100)}.bind(this))};const s=o;function r(e,n){this.name=e,this.time=n,this.status=t}function d(){this.status=t,this.resolve()}r.prototype.isAvailable=function(){return this.status===t},r.prototype.finishServing=function(){this.status=t},r.prototype.serveAsync=function(){return this.status="SERVING",new Promise(function(t){this.resolve=t,setTimeout(d.bind(this),this.time)}.bind(this))};const u=r;function a(t){this.servers=t}a.prototype.findServerAsync=function(){return new Promise(function(t){setInterval(function(t,e){return function(){t.forEach((function(t){if(t.isAvailable())return e(t)}))}}(this.servers,t),100)}.bind(this))};var c=i,p=u,f=a,g=function(t,e,n){this.id=t,this.name=e,this.time=n},h=new s([new c("요리사1"),new c("요리사2")]),l=new f([new p("직원1",1500),new p("직원2",3e3)]);function v(t,e){return function(){var n,i=crypto.randomUUID();(function(t){Widget.get("orderUl").append(Widget.li(`${t.id}`).append(Widget.span(`${t.name}-${t.id}`,{textContent:t.name})))})(n=new g(i,t,e)),h.findChefAsync().then((function(t){return function(t,e){Widget.get("cookingUl").append(Widget.get(t).append(Widget.span(`info-${t}`,{textContent:`(${e.name})`})))}(n.id,t),t.cookAsync(n)})).then((function(){var t;return t=n.id,Widget.get("cookedUl").append(Widget.get(t)),Widget.get(`info-${t}`).updateContent("(server를 찾는중..)"),l.findServerAsync()})).then((function(t){return function(t,e){Widget.get("servingUl").append(Widget.get(t)),Widget.get(`info-${t}`).updateContent(`(${e.name})`)}(n.id,t),t.serveAsync()})).then((function(){!function(t){Widget.get(t.id).remove(t.id),Widget.get(`${t.name}-${t.id}`).remove(t.id),Widget.get(`info-${t.id}`).remove(t.id)}(n)}))}}Widget.fragment("fragment").append(Widget.h1("title",{textContent:"Restaurant"})).append(Widget.button("sundaeBtn",{textContent:"순댓국",onClick:v("순댓국",2e3)})).append(Widget.button("haejangBtn",{textContent:"해장국",onClick:v("해장국",3e3)})).append(Widget.h3("orderH3",{textContent:"주문"})).append(Widget.ul("orderUl")).append(Widget.h3("cookingH3",{textContent:"요리중"})).append(Widget.ul("cookingUl")).append(Widget.h3("cookedH3",{textContent:"요리완료"})).append(Widget.ul("cookedUl")).append(Widget.h3("servingH3",{textContent:"서빙중"})).append(Widget.ul("servingUl")),Widget.get("fragment").appendToDOM(document.body)})();